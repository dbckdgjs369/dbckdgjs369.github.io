## NPM run ~ 할 때 무슨 일이 일어나는가?

1. package.json파일에 가서 script를 찾고, 그곳에 있는 커맨드를 실행한다.

Q.그럼 왜 직접 거기 써있는 것을 실행하지 않을까??\*\*

A. 만약 직접 실행을 한다면 그 커맨드는 현재 os에 없는 커맨드이기 때문에 에러가 발생할 것이다.

Q. 그럼 존재하지 않는 커맨드인데 npm run~ 으로 하면 실행이 되는 이유가 뭘까?

1. 우리는 npm i 로 dependency를 설치한다.
2. npm이 이를 설치할 때 해당 dependency를 node_modules/.bin/ 에 생성을 한다.
3. 이곳에는 실행 파일들이 존재한다.
4. .bin 폴더는 npm 패키지 들을 저장하는 곳이 아니라 soft links를 제공한다.

> **Soft Link**: 쉽게 말하면 바로 가기 링크 같은 것이다. 원본 파일을 가리키는 주소를 링크하고 있는 파일을 만든다.  
> **Hard Link**: 원본 파일과 동일한 내용의 다른 파일이다. 원본 파일을 직접적으로 가리키고 있기 때문에 원본 파일을 수정해도 하드 링크 파일이 수정되고, 하드 링크를 수정해도 원본에 반영이 된다.

⇒ npm run ~ 을 하면 글로벌 커맨드가 설치되어있지 않더라도 npm이 ./node_modules/.bin에서 해당 디렉토리를 찾아서 script를 실행시켜준다.

## 결론

npm i 를 했을 때 npm에서 bin파일로 선언하고 ./node_modules/.bin 디렉토리에 soft link를 추가한다. node_modules/.bin 을 $PATH에 넣어주고, 커맨드로 바로 사용할 수 있게 해준다.
