---
layout: post
title: "호이스팅"
author: Yoo Chang Heon
tags: [JavaScript]
category: [JavaScript]
---

## 호이스팅

함수 안에 있는 선언들을 모두 끌어올려서 해당 함수 유효 범위의 최상단에 선언하는 것

자바스크립트 함수는 실행되기 전에 함수 안에 필요한 변수 값들을 모두 모아서 유효 범위의 최상단에 선언한다.

- 유효범위: 함수 블록 { } 안에서 유효

즉, 함수 내에서 아래쪽에 존재하는 내용 중 필요한 값들을 끌어올리는 것

- 실제로 코드가 끌어올려지는 것은 x, 자바스크립트 parser가 내부적으로 끌어올려서 처리
- 실제로 메모리에는 변화가 x

### 호이스팅의 대상

- <b>var 변수 선언</b>과 <b>함수 선언문</b>에서만 호이스팅 일어남 ( var 변수/함수의 선언만 위로 끌어올려지며, 할당은 끌어올려지지 않는다. let, const 함수표현식에서는 호이스팅 발생 x)

        function foo() { // 함수선언문(호이스팅 o)
                console.log("hello");
        }
        var foo2 = function() { // 함수표현식(호이스팅 x)
                console.log("hello2");
        }

### 함수 선언문에서의 호이스팅

- 함수 선언문은 선언 위치와 관계없이 호이스팅 되어 맨 위로 끌어 올려진다.

### 함수 표현식에서의 호이스팅

- 함수 표현식은 선언문과 달리 선언과 호출 순서에 따라서 정상적으로 함수가 실행되지 않을 수 있다.
  (함수 표현식에서는 선언과 할당의 분리가 발생)

  ### 호이스팅 우선순위

#### 같은 이름의 var 변수 선언과 함수 선언에서의 호이스팅

- 변수 선언 > 함수선언( 더 위로 )
- 값이 할당되어 있지 않는 변수의 경우 함수 선언문이 변수를 덮어쓴다.
- 값이 할당되어 있는 변수의 경우 변수가 함수 선언문을 덮어쓴다.

### 호이스팅을 왜 알아야할까

ES6를 어디서든 쓸 수 있으려면 아직 시간이 필요하므로 ES5로 트랜스 컴파일을 해야한다. => 아직은 var가 어떻게 동작하는지 알아야한다.

---

## 추가

### 함수 선언 방법

- 함수선언문: 런타임 이전에 자바스크립트 엔진에서 먼저 실행되어 함수 자체가 호이스팅이 가능하다.
- 함수표현식: 런타임 이전에 해당 값을 undefined로 초기화
- Function 생성자 함수: 런타임에서 할당되어 그 때 객체가 된다.
- 화살표 함수

### var 문제점

- 변수 중복 선언 가능
- 함수 레벨 스코프로 함수 외부 선언 시 전역변수
- 변수 선언문 이전에 변수를 참조하면 언제나 undefined

### let

변수 중복 선언 x (재할당은 가능하다.)

### const

변수 중복 선언 x => 반드시 선언과 초기화를 동시에 진행해야한다.

재선언, 재할당 x (재할당의 경우 객체로는 가능)

==> 재할당을 금지할 뿐 불변은 x

## 변수 호이스팅

1. let: 선언 단계와 초기화 단계가 분리되어 진행된다.

런타임 이전에 자바스크립트 엔진에 의해 선언단계가 먼저 실행된다. 초기화 단계가 실행되지 않았을 때 접근 시 참조에러 발생한다.

cf) 일시적 사각지대( TDZ : Temporal Dead Zone ): 스코프의 시작지점부터 초기화 단계 시작 지점까지 참조할 수 없다.

2. const: 선언과 초기화 단계가 동시에 진행된다. => 런타임 이전에는 실행될 수 없다.
